
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Structure Building &#8212; PostHydro 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Ordered Mouth Nodes" href="structurebuilding_orderedmouthnodes.html" />
    <link rel="prev" title="PostHydro Capabilities" href="capabilities.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="structure-building">
<h1>Structure Building<a class="headerlink" href="#structure-building" title="Permalink to this headline">¶</a></h1>
<p>The original database tables that provide the starting point for the development of a PostHydro database core of a region are the hydrography table, with reach id, to and from nodes, geometry, river code and name, the contributing area table, with ids and geometry, and the coastlines table, where the basins flow to, with their id, name and geometry. The structure building routines add to the hydrography table fields that provide topological information to locate the reaches within their basins and on the hydrologic region.</p>
<p>A PostHydro compliant database of a region consists of a set of basins that flow to a pseudo-river, in fact a composite coastline, made of segments on a continental coastline and on related islands and inner seas coastlines, each basin with its own pfafstetter code. These basins will be further pfafstetter coded, by adding more digits to their base code.</p>
<p>The basin mouth nodes are represented by the ordered_mouth_nodes table and the basins themselves by the hydrography table, with the waterways (rivers and lakes centerlines) reaches and all the topology related information in its fields. The structure building consists in building the mouth nodes table and adding the topological information (linear and areal) to the hydrography table.</p>
<p>The linear part of the structure building consists of adding or updating fields with the length of the reach, lengths along the streams from the its upstream point to the river and basin mouths and length along the streams from the reaches downstream point to the most upstream point on its basin.</p>
<p>The areal part of the structure building consists of adding or updating fields with identification of the reach contributing area, an estimate of the part of this contributing area corresponding to the reach and its upstream area.</p>
<p>PostHydro supports elementary contributing areas comprising more than one reach. Boolean fields are provided (is_main rch and is_down_rch) that identify the main path along the individual contributing area and the area’s most downstream reach. This is important information used for display in the information application and for hydroreferencing spatial information.</p>
<p>The most important topological information added is the Pfafstetter code of the reach (pfcode) and of its main stream (pfcodestr), which act like a topological index of the reach and thus make possible upstream and downstream navigation with ordinary database queries.</p>
<p>Tests are provided, that check the integrity of the database.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="structurebuilding_orderedmouthnodes.html">Ordered Mouth Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="structurebuilding_areaslengths.html">Areas and Lengths</a></li>
<li class="toctree-l1"><a class="reference internal" href="structurebuilding_downmainreach.html">Down and Main Reaches</a></li>
<li class="toctree-l1"><a class="reference internal" href="structurebuilding_pfafstettercoding.html">Pfafstetter Coding</a></li>
<li class="toctree-l1"><a class="reference internal" href="structurebuilding_testing.html">Testing</a></li>
</ul>
</div>
<section id="tables">
<h2>Tables<a class="headerlink" href="#tables" title="Permalink to this headline">¶</a></h2>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Hydrography Reaches (hydrography)</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 30%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>field name</p></th>
<th class="head"><p>field type</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>gid</p></td>
<td><p>integer</p></td>
<td><p>primary key</p></td>
</tr>
<tr class="row-odd"><td><p>fnode</p></td>
<td><p>integer</p></td>
<td><p>from node id</p></td>
</tr>
<tr class="row-even"><td><p>tnode</p></td>
<td><p>integer</p></td>
<td><p>to node id</p></td>
</tr>
<tr class="row-odd"><td><p>lengthkm</p></td>
<td><p>double precision</p></td>
<td><p>reach length in km</p></td>
</tr>
<tr class="row-even"><td><p>areaid</p></td>
<td><p>integer</p></td>
<td><p>contributing area id</p></td>
</tr>
<tr class="row-odd"><td><p>is_down_rch</p></td>
<td><p>boolean</p></td>
<td><p>contributing area downmost reach flag</p></td>
</tr>
<tr class="row-even"><td><p>is_main_rch</p></td>
<td><p>boolean</p></td>
<td><p>main path across a contributing area reach flag</p></td>
</tr>
<tr class="row-odd"><td><p>areakm2</p></td>
<td><p>double precision</p></td>
<td><p>reach contributing area in km2</p></td>
</tr>
<tr class="row-even"><td><p>areaupkm2</p></td>
<td><p>double precision</p></td>
<td><p>reach upstream contributing area in km2</p></td>
</tr>
<tr class="row-odd"><td><p>mxlengthup</p></td>
<td><p>double precision</p></td>
<td><p>reach longest upstream path from the its downstream point in km</p></td>
</tr>
<tr class="row-even"><td><p>lngthtomouth</p></td>
<td><p>double precision</p></td>
<td><p>reach upstream point length to basin mouth in km</p></td>
</tr>
<tr class="row-odd"><td><p>pfcode</p></td>
<td><p>text</p></td>
<td><p>reach pfafestter code</p></td>
</tr>
<tr class="row-even"><td><p>pfcodestr</p></td>
<td><p>text</p></td>
<td><p>reach main stream pfafestter code</p></td>
</tr>
<tr class="row-odd"><td><p>rivcode</p></td>
<td><p>text</p></td>
<td><p>reach river code</p></td>
</tr>
<tr class="row-even"><td><p>rivname</p></td>
<td><p>text</p></td>
<td><p>reach river name</p></td>
</tr>
<tr class="row-odd"><td><p>lngthrivmouth</p></td>
<td><p>double precision</p></td>
<td><p>reach upstream point length to river mouth in km</p></td>
</tr>
<tr class="row-even"><td><p>geom</p></td>
<td><p>geometry(LineString)</p></td>
<td><p>geometry</p></td>
</tr>
</tbody>
</table>
<p>—</p>
<table class="colwidths-given docutils align-default" id="id2">
<caption><span class="caption-text">Elementary Contributing Areas (contrib_area)</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 30%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>field name</p></th>
<th class="head"><p>field type</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>gid</p></td>
<td><p>integer</p></td>
<td><p>primary key</p></td>
</tr>
<tr class="row-odd"><td><p>zhyd</p></td>
<td><p>character</p></td>
<td><p>multipart contributing area id on the source (Ecrins) database</p></td>
</tr>
<tr class="row-even"><td><p>part</p></td>
<td><p>integer</p></td>
<td><p>multipart contributing area part id</p></td>
</tr>
<tr class="row-odd"><td><p>geom</p></td>
<td><p>geometry(Polygon)</p></td>
<td><p>geometry</p></td>
</tr>
</tbody>
</table>
<p>—</p>
<table class="colwidths-given docutils align-default" id="id3">
<caption><span class="caption-text">Coast Lines (oriented_coastal_lines)</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 30%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>field name</p></th>
<th class="head"><p>field type</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>gid</p></td>
<td><p>integer</p></td>
<td><p>coast line id</p></td>
</tr>
<tr class="row-odd"><td><p>linename</p></td>
<td><p>character</p></td>
<td><p>coast line name</p></td>
</tr>
<tr class="row-even"><td><p>geom</p></td>
<td><p>geometry(LineString)</p></td>
<td><p>coast line geometry</p></td>
</tr>
</tbody>
</table>
<p>—</p>
<table class="colwidths-given docutils align-default" id="id4">
<caption><span class="caption-text">Basin Mouth Nodes (ordered_mouth_nodes)</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 30%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>field name</p></th>
<th class="head"><p>field type</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>gid</p></td>
<td><p>integer</p></td>
<td><p>primary key</p></td>
</tr>
<tr class="row-odd"><td><p>node</p></td>
<td><p>integer</p></td>
<td><p>mouth node id</p></td>
</tr>
<tr class="row-even"><td><p>reachid</p></td>
<td><p>integer</p></td>
<td><p>mouth reach id</p></td>
</tr>
<tr class="row-odd"><td><p>coastline_id</p></td>
<td><p>integer</p></td>
<td><p>mouth coastline id</p></td>
</tr>
<tr class="row-even"><td><p>coastline</p></td>
<td><p>character varying</p></td>
<td><p>mouth coastline name</p></td>
</tr>
<tr class="row-odd"><td><p>coast_system</p></td>
<td><p>character varying</p></td>
<td><p>coast system name</p></td>
</tr>
<tr class="row-even"><td><p>point_locate</p></td>
<td><p>double precision</p></td>
<td><p>mouth node location on the coastline in km</p></td>
</tr>
<tr class="row-odd"><td><p>coast_segment</p></td>
<td><p>integer</p></td>
<td><p>mouth coastline segment id</p></td>
</tr>
<tr class="row-even"><td><p>areaupkm2</p></td>
<td><p>double precision</p></td>
<td><p>basin area in km2</p></td>
</tr>
<tr class="row-odd"><td><p>mxlengthup</p></td>
<td><p>double precision</p></td>
<td><p>basin’s greatest river length in km</p></td>
</tr>
<tr class="row-even"><td><p>pfcode</p></td>
<td><p>character varying</p></td>
<td><p>basin’s pfafstetter code</p></td>
</tr>
<tr class="row-odd"><td><p>geom</p></td>
<td><p>geometry(Point)</p></td>
<td><p>mouth node geometry</p></td>
</tr>
</tbody>
</table>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">PostHydro</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="informationstructure.html">Information Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="pfafstettercoding.html">Pfafstetter Coding</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="capabilities.html">PostHydro Capabilities</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Structure Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="informationreferencing.html">Information Referencing</a></li>
<li class="toctree-l2"><a class="reference internal" href="upstreamdownstreamnavigation.html">Upstream Downstream Navigation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="desktopclient.html">Desktop Client</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="capabilities.html">PostHydro Capabilities</a><ul>
      <li>Previous: <a href="capabilities.html" title="previous chapter">PostHydro Capabilities</a></li>
      <li>Next: <a href="structurebuilding_orderedmouthnodes.html" title="next chapter">Ordered Mouth Nodes</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2025, Flavio Lyra.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/structurebuilding.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
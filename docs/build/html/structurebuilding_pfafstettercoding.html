
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Pfafstetter Coding &#8212; PostHydro 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Testing" href="structurebuilding_testing.html" />
    <link rel="prev" title="Down and Main Reaches" href="structurebuilding_downmainreach.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="pfafstetter-coding">
<h1>Pfafstetter Coding<a class="headerlink" href="#pfafstetter-coding" title="Permalink to this headline">¶</a></h1>
<p>Pfafstetter coding is done in two different steps: establishing the base code of each of the basins draining to a coastline and additional coding of each basin (adding digits to its base code). The first part is addressed on the ordered mouth nodes table. The functions in this section refer to the coding of the basins, that is, coding each group of reaches between two nodes (pfcode) and developing the reaches main stream code (pfcodestr).</p>
<p>The process is done in steps: first the main stream is identified and coded (pfcodestr), then the nine sub basins are identified and their digits added to the code, then the even basins (proper basins) are further coded by the same recursive procedure and the odd (interbasins) by a slightly different procedure. This recursive procedure is repeated until there are no more reaches to be coded.</p>
<section id="types">
<h2>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h2>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Confluences (confluence)</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 30%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>field name</p></th>
<th class="head"><p>field type</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>nodid</p></td>
<td><p>integer</p></td>
<td><p>confluence node id</p></td>
</tr>
<tr class="row-odd"><td><p>main_id</p></td>
<td><p>integer</p></td>
<td><p>main reach id</p></td>
</tr>
<tr class="row-even"><td><p>main_lengthup</p></td>
<td><p>double precision</p></td>
<td><p>maximum length upstream of the main reach</p></td>
</tr>
<tr class="row-odd"><td><p>main_areaup</p></td>
<td><p>double precision</p></td>
<td><p>upstream area on the main reach</p></td>
</tr>
<tr class="row-even"><td><p>trib_id</p></td>
<td><p>integer</p></td>
<td><p>tributary reach id</p></td>
</tr>
<tr class="row-odd"><td><p>trib_lengthup</p></td>
<td><p>double precision</p></td>
<td><p>maximum length upstream of the tributary reach</p></td>
</tr>
<tr class="row-even"><td><p>trib_areaup</p></td>
<td><p>double precision</p></td>
<td><p>upstream area on the tributary reach</p></td>
</tr>
</tbody>
</table>
</section>
<section id="procedures-and-functions">
<h2>Procedures and Functions<a class="headerlink" href="#procedures-and-functions" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="code_assign_basin">
<span class="sig-name descname"><span class="pre">code_assign_basin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reachid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#code_assign_basin" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign code to pfcode on reachid and all its upstream reaches on hydrography table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> (<em>character varying</em>) – code to be assigned to pfcode on reachid and its upstream reaches</p></li>
<li><p><strong>reachid</strong> (<em>integer</em>) – id of the downstream reach of the basin where code is to be assigned to pfcode</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="index_pfcode">
<span class="sig-name descname"><span class="pre">index_pfcode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#index_pfcode" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an index on pfcode and pfcodestr, on hydrography table</p>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="code">
<span class="sig-name descname"><span class="pre">code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basecode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#code" title="Permalink to this definition">¶</a></dt>
<dd><p>Code all basins starting with the single digit basecode</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>basecode</strong> (<em>character varying</em><em>(</em><em>1</em><em>)</em>) – pfafstetter code initial digit</p>
</dd>
</dl>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="code_assign_interbasin">
<span class="sig-name descname"><span class="pre">code_assign_interbasin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reachid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upstr_node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#code_assign_interbasin" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign code to pfcode on reachid, all its upstream reaches on the main stream up to upstr_node
and all tributary basins found on the path, on hydrography table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> (<em>character varying</em>) – code to be assigned to pfcode on reachid and its upstream reaches until upstr_node</p></li>
<li><p><strong>reachid</strong> (<em>integer</em>) – id of the downstream reach of the interbasin where code is to be assigned to pfcode</p></li>
<li><p><strong>upstr_node</strong> (<em>integer</em>) – id of the upstream node on the main stream of the interbasin where code is to be assigned to pfcode</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="pfafstetter_code">
<span class="sig-name descname"><span class="pre">pfafstetter_code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basecode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reachid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">main_basin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pfafstetter_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Pfafstetter code (pfcode and pfcodestr) an entire basin consisting of reachid and its upstream reaches, on hydrography table,
taking as seed basecode. The basin can be a proper basin (main_basin true) or a code 9 interbasin (main_basin false)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>basecode</strong> (<em>character varying</em>) – seed code upon which the basin will be further coded by the Pfafstetter method</p></li>
<li><p><strong>reachid</strong> (<em>integer</em>) – id of the downstream reach of the basin to be coded</p></li>
<li><p><strong>main_basin</strong> (<em>boolean</em>) – signals if the basin to be coded is a proper basin (true) or a 9 interbasin (false)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="main_stream">
<span class="sig-name descname"><span class="pre">main_stream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pfcodemain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reachid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mainbasin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endnode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#main_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the main stream in a Pfafstetter basin, following in the confluences the reaches with the largest area upstream,
set its Pfafstetter stream code (pfcodestr in hydrography table), if mainbasin is true, and return the set of its confluences</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pfcodemain</strong> (<em>character varying</em>) – stream pfafstetter code</p></li>
<li><p><strong>reachid</strong> (<em>integer</em>) – id of the downstream reach of the main stream</p></li>
<li><p><strong>mainbasin</strong> (<em>boolean</em>) – if true, signals that it is the main stream of a proper basin, not of an interbasin</p></li>
<li><p><strong>endnode</strong> (<em>integer</em>) – id of the upstream node of an interbasin</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>conf</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>set of confluence records</p>
</dd>
</dl>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="pfafstetter_code_interbasin">
<span class="sig-name descname"><span class="pre">pfafstetter_code_interbasin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basecode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reachid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upstr_node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pfafstetter_code_interbasin" title="Permalink to this definition">¶</a></dt>
<dd><p>Pfafstetter code (pfcode and pfcodestr) an interbasin consisting of reachid and its upstream reaches on main stream up to upstr_node,
and all tributary basins found on the path, on hydrography table, taking as seed basecode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>basecode</strong> (<em>character varying</em>) – seed code upon which the interbasin will be further coded by the Pfafstetter method</p></li>
<li><p><strong>reachid</strong> (<em>integer</em>) – id of the downstream reach of the interbasin to be coded</p></li>
<li><p><strong>upstr_node</strong> (<em>integer</em>) – node code of the upstream limit (on main stream) of the interbasin to be coded</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">PostHydro</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="informationstructure.html">Information Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="pfafstettercoding.html">Pfafstetter Coding</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="capabilities.html">PostHydro Capabilities</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="structurebuilding.html">Structure Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="informationreferencing.html">Information Referencing</a></li>
<li class="toctree-l2"><a class="reference internal" href="upstreamdownstreamnavigation.html">Upstream Downstream Navigation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="desktopclient.html">Desktop Client</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="capabilities.html">PostHydro Capabilities</a><ul>
  <li><a href="structurebuilding.html">Structure Building</a><ul>
      <li>Previous: <a href="structurebuilding_downmainreach.html" title="previous chapter">Down and Main Reaches</a></li>
      <li>Next: <a href="structurebuilding_testing.html" title="next chapter">Testing</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2025, Flavio Lyra.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/structurebuilding_pfafstettercoding.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Testing &#8212; PostHydro 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Information Referencing" href="informationreferencing.html" />
    <link rel="prev" title="Pfafstetter Coding" href="structurebuilding_pfafstettercoding.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="testing">
<h1>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h1>
<p>A consistent hydrography table is one where:</p>
<ul class="simple">
<li><p>Except for the mouth nodes, every to node must correspond to another reach from node - in a basin, all reaches are logically connected, there are no loose reaches;</p></li>
<li><p>All reaches should be drawn from upstream to downstream, and a reach most downstream point must correspond to the most upstream point on the downstream connected reach - reaches must be geometrically connected - this is a necessary condition for the correct hydroreference of point features;</p></li>
<li><p>There should not be more than two confluent reaches at every node - the hydrography at triple confluences should be edited and a new very small reach added in order to correct this situation - correct pfafstetter coding demands no more than two upstream confluences.</p></li>
</ul>
<p>Testing routines are available to check the hydrography table consistence. The test for loose connections must be run after setting length related fields on the hydrography, it generates a discontinuous_reaches table, with reach ids where mxlengthup is null. The tests for reach misorientation (or physical disconnection) and for triple confluences work the same way: they create a table with the number of errors upstream on a basin. Routines are available to show where (at what reach) the problem occurs, that create a table with the problem reach ids.</p>
<section id="procedures-and-functions">
<h2>Procedures and Functions<a class="headerlink" href="#procedures-and-functions" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="gen_orientation_mouth_nodes">
<span class="sig-name descname"><span class="pre">gen_orientation_mouth_nodes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gen_orientation_mouth_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate orientation_mouth_nodes table, with, for every basin mouth reach, the number of misoriented or misconnected reaches upstream</p>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="generate_details_reach_misorientation">
<span class="sig-name descname"><span class="pre">generate_details_reach_misorientation</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#generate_details_reach_misorientation" title="Permalink to this definition">¶</a></dt>
<dd><p>Based on the orientation_mouth_nodes, with the number of misoriented reaches upstream of each basin root reach
create a reach_misorientation table, with the root reach id and the id of the reach with connection or orientation issues</p>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="details_reach_misorientation">
<span class="sig-name descname"><span class="pre">details_reach_misorientation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rootreach_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reachid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geom_node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#details_reach_misorientation" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert into reach_misorientation table, with the basin root reach id and the id of the misoriented reach
a reach id, with its root reach, whenever the downstream point of an upstream connecting reach does not correspond to its upstream point
This situation corresponds to a misoriented reach or a misconnection (a geometry gap)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rootreach_id</strong> (<em>integer</em>) – id of the root reach of reachid</p></li>
<li><p><strong>reachid</strong> (<em>integer</em>) – id of the reach whose upstream misoriented reaches are counted</p></li>
<li><p><strong>geom_node</strong> (<em>geometry</em><em>(</em><em>Point</em><em>)</em>) – geometry of the reachid’s upstream point</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="check_basin_orientation">
<span class="sig-name descname"><span class="pre">check_basin_orientation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reachid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#check_basin_orientation" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the number of misoriented or physically disconnected reaches upstream of reachid</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>reachid</strong> (<em>integer</em>) – id of the reach whose upstream misoriented reaches are counted</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>check_reach_orientation</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>integer</p>
</dd>
</dl>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="check_reach_orientation">
<span class="sig-name descname"><span class="pre">check_reach_orientation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reachid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geom_node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#check_reach_orientation" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of misoriented or physically disconnected reaches upstream of reachid, whose upstream node geometry is geom_node</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reachid</strong> (<em>integer</em>) – id of the reach whose upstream misoriented reaches are counted</p></li>
<li><p><strong>geom_node</strong> (<em>geometry</em><em>(</em><em>Point</em><em>)</em>) – geometry of the reachid’s upstream point</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>nfo</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>integer</p>
</dd>
</dl>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="reach_continuity">
<span class="sig-name descname"><span class="pre">reach_continuity</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#reach_continuity" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a discontinuous_reaches table with the id and geometry of all the reaches where mxlengthup is null
To be run after the gen_length procedure fills all the length related fields in the hydrography table</p>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="num_triple_confluence">
<span class="sig-name descname"><span class="pre">num_triple_confluence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reachid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#num_triple_confluence" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the number of triple confluences upstream of reachid</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>reachid</strong> (<em>integer</em>) – id of the reach whose upstream triple confluences are counted</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>n_triple_conf</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>integer</p>
</dd>
</dl>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="details_reach_triple_conf">
<span class="sig-name descname"><span class="pre">details_reach_triple_conf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rootreach</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reachid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#details_reach_triple_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>For every reach upstream of rootreach with a triple confluence,
insert the root reach and the reach id into the reach_triple_conf table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rootreach</strong> (<em>integer</em>) – id of the mouth reach of the basin whose upstream triple confluences are counted</p></li>
<li><p><strong>reachid</strong> (<em>integer</em>) – id of the reach whose upstream triple confluences are counted</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="generate_details_reach_triple_conf">
<span class="sig-name descname"><span class="pre">generate_details_reach_triple_conf</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#generate_details_reach_triple_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Based on the triple_conf_mouth_nodes table, with triple_conf, the number of triple confluences upstream of their root reaches,
create a reach_triple_conf table with the root reach id and the ids of the upstream triple confluence reaches</p>
</dd></dl>

<p>—</p>
<dl class="py function">
<dt class="sig sig-object py" id="gen_triple_conf_mouth_nodes">
<span class="sig-name descname"><span class="pre">gen_triple_conf_mouth_nodes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gen_triple_conf_mouth_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a triple_conf_mouth_nodes table with, for every basin root reach, the number of triple confluences upstream</p>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">PostHydro</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="informationstructure.html">Information Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="pfafstettercoding.html">Pfafstetter Coding</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="capabilities.html">PostHydro Capabilities</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="structurebuilding.html">Structure Building</a></li>
<li class="toctree-l2"><a class="reference internal" href="informationreferencing.html">Information Referencing</a></li>
<li class="toctree-l2"><a class="reference internal" href="upstreamdownstreamnavigation.html">Upstream Downstream Navigation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="desktopclient.html">Desktop Client</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="capabilities.html">PostHydro Capabilities</a><ul>
  <li><a href="structurebuilding.html">Structure Building</a><ul>
      <li>Previous: <a href="structurebuilding_pfafstettercoding.html" title="previous chapter">Pfafstetter Coding</a></li>
      <li>Next: <a href="informationreferencing.html" title="next chapter">Information Referencing</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2025, Flavio Lyra.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/structurebuilding_testing.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>